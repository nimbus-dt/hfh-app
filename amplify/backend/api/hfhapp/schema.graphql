type ContactForm @model @auth(rules: [{allow: public}]) {
  id: ID!
  name: String
  affiliate: String
  contactEmail: String
}

type UserProps @model @auth(rules: [{allow: public}, {allow: owner, operations: [create]}]) {
  id: ID!
  ownerID: String
  name: String
  dob: AWSDate
  sex: SexTypes
  phone: AWSPhone
  props: AWSJSON
  address: String
  zip: Int
  email: AWSEmail
}

enum ApplicationSubmittedStatus {
  ACCEPTED
  PENDING
  REJECTED
}

enum DebtTypes {
  MEDICAL
  STUDENT_LOANS
  COLLECTIONS
  CAR
  PERSONAL_LOANS
  INSTALLMENT_LOANS
  CREDIT_CARD
  CHILD_SUPPORT
  ALIMONY
  OTHER
}

type DebtRecord @model @auth(rules: [{allow: public}]) {
  id: ID!
  ownerID: String
  monthlyRecurrence: Float
  typeOfDebt: DebtTypes
  estimatedAmount: Float
  applicationID: ID @index(name: "byApplication")
  ownerApplicant: Boolean
}

type SavingRecord @model @auth(rules: [{allow: public}]) {
  id: ID!
  ownerID: ID
  institution: String
  estimatedAmount: Float
  applicationID: ID @index(name: "byApplication")
  ownerApplicant: Boolean
}

enum IncomeTypes {
  SALARIED_EMPLOYMENT
  HOURLY_EMPLOYMENT
  SELF_EMPLOYMENT
  SOCIAL_SECURITY_DISABILITY_INSURANCE
  SOCIAL_SECURITY_BENEFITS
  SUPPLEMENTAL_SECURITY_INCOME
  HOUSING_VOUCHER
  CHILD_SUPPORT
  ALIMONY_SUPPORT
  VETERANS_AFFAIR_COMPENSATION
  PENSION_PAYMENTS
  MILITARY_ENTITLEMENTS
  OTHER
}

type IncomeRecord @model @auth(rules: [{allow: public}]) {
  id: ID!
  ownerID: ID
  typeOfIncome: IncomeTypes
  employer: String
  estimatedMonthlyIncome: Float
  proofOfIncome: [ID]
  applicationID: ID @index(name: "byApplication")
  ownerApplicant: Boolean
  totalIncome: Float
}

type HouseholdMember @model @auth(rules: [{allow: public}]) {
  id: ID!
  name: String
  dateOfBirth: AWSDate
  sex: SexTypes
  relationship: RelationshipTypes
  isCoapplicant: Boolean
  applicationID: ID @index(name: "byApplication")
}

enum SexTypes {
  MALE
  FEMALE
  OTHER
}

enum RelationshipTypes {
  SPOUSE
  SON
  DAUGHTER
  NEPHEW
  NIECE
  PARENT
  SIBLING
  OTHER
}

type Application @model @auth(rules: [{allow: public}]) {
  id: ID!
  ownerID: ID
  habitatID: ID! @index(name: "byHabitat")
  HouseholdMembers: [HouseholdMember] @hasMany(indexName: "byApplication", fields: ["id"])
  IncomeRecords: [IncomeRecord] @hasMany(indexName: "byApplication", fields: ["id"])
  SavingRecords: [SavingRecord] @hasMany(indexName: "byApplication", fields: ["id"])
  DebtRecords: [DebtRecord] @hasMany(indexName: "byApplication", fields: ["id"])
  submitted: Boolean
  dateSubmitted: AWSDate
  submittedStatus: ApplicationSubmittedStatus
  habitatRevisor: ID
  dateRevised: AWSDate
  ownerName: String
}

type Habitat @model @auth(rules: [{allow: public}]) {
  id: ID!
  name: String
  urlName: String
  state: String
  city: String
  county: String
  countiesServed: [String]
  props: AWSJSON
  Applications: [Application] @hasMany(indexName: "byHabitat", fields: ["id"])
  users: [ID]
}
 